<!DOCTYPE html>
<html lang="de">

<head>
    <title>EMR-Planer</title>
    <meta charset="utf-8">


    <link href="article.css" rel="stylesheet">
    <link href="table.css" rel="stylesheet">

    <style>
        *,
        *::after,
        *::before {
            margin: 0;
            margin-inline: 0;
            box-sizing: border-box;
        }

        input.appointment,
        input[id^=appointment] {
            text-transform: uppercase;
            width: 75px;
        }
    </style>

    <script src="https://cdn.jsdelivr.net/gh/cieszynski/dberta.js@latest/dberta.min.js"></script>
</head>

<body>
    <form id="data" spellcheck="false" onsubmit="return false">
        <table>
            <col>
            <col>
            <col>
            <col>
            <col span="2">
            <col span="2">
            <col span="2">
            <col span="2">
            <thead>
                <tr>
                    <th rowspan="2">Name</th>
                    <th rowspan="2"><input id="editable-med1"></th>
                    <th rowspan="2"><input id="editable-med2"></th>
                    <th rowspan="2"><input id="editable-med3"></th>
                    <th colspan="2"><input id="editable-psy1"></th>
                    <th colspan="2"><input id="editable-psy2"></th>
                    <th colspan="2"><input id="editable-psy3"></th>
                    <th colspan="2"><input id="editable-psy4"></th>
                </tr>
                <tr>
                    <th>Test</th>
                    <th>Befund</th>
                    <th>Test</th>
                    <th>Befund</th>
                    <th>Test</th>
                    <th>Befund</th>
                    <th>Test</th>
                    <th>Befund</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <aside>
            <fieldset>
                <legend>Kalenderwoche</legend>
                <input id="week" type="week">
            </fieldset>
            <fieldset>
                <legend>Teilnehmer</legend>
                <label><input type="radio" name="participant" value="1">1</label>
                <label><input type="radio" name="participant" value="2">2</label>
                <label><input type="radio" name="participant" value="3">3</label>
                <label><input type="radio" name="participant" value="4">4</label>
                <label><input type="radio" name="participant" value="5">5</label>
                <label><input type="radio" name="participant" value="6">6</label>
                <label><input type="radio" name="participant" value="7">7</label>
                <label><input type="radio" name="participant" value="8">8</label>
                <label><input type="radio" name="participant" value="9">9</label>
                <label><input type="radio" name="participant" value="10" checked>10</label>
            </fieldset>
            <fieldset>
                <legend>Mediziner</legend>
                <label>
                    <input type="checkbox" name="physician1" checked>Med1
                </label>
                <label>
                    <input type="checkbox" name="physician2" checked>Med2
                </label>
                <label>
                    <input type="checkbox" name="physician3" checked>Med3
                </label>
            </fieldset>
            <fieldset>
                <legend>Psychologen</legend>
                <label>
                    <input type="checkbox" name="psychologist1" checked>Psy1
                </label>
                <label>
                    <input type="checkbox" name="psychologist2" checked>Psy2
                </label>
                <label>
                    <input type="checkbox" name="psychologist3" checked>Psy3
                </label>
                <label>
                    <input type="checkbox" name="psychologist4" checked>Psy4
                </label>
            </fieldset>
        </aside>
        <section>
            <!-- USER 10 -->
            <article>
                <header>
                    <h2>Termine für <output name="output-username-10">XXX</output></h2>
                </header>
                <h3><output name="user-10-monday" contenteditable="plaintext-only"></output></h3>
                <dl>
                    <dt>bla</dt>
                    <dd>blub</dd>
                    <dt>bla</dt>
                    <dd>blub</dd>
                </dl>
                <h3><output name="user-10-thursday" contenteditable="plaintext-only"></output></h3>
            </article>

            <!-- USER 9-->
            <article>
                <header>
                    <h2>Termine für <output name="output-username-9">XXX</output></h2>
                </header>
                <h3><output name="user-9-monday" contenteditable="plaintext-only"></output></h3>
                <dl>
                    <dt>bla</dt>
                    <dd>blub</dd>
                    <dt>bla</dt>
                    <dd>blub</dd>
                </dl>
                <h3><output name="user-9-thursday" contenteditable="plaintext-only"></output></h3>
            </article>

            <!-- USER 8-->
            <article>
                <header>
                    <h2>Termine für <output name="output-username-8">XXX</output></h2>
                </header>
                <h3><output name="user-8-monday" contenteditable="plaintext-only"></output></h3>
                <dl>
                    <dt>bla</dt>
                    <dd>blub</dd>
                    <dt>bla</dt>
                    <dd>blub</dd>
                </dl>
                <h3><output name="user-8-thursday" contenteditable="plaintext-only"></output></h3>
            </article>
        </section>
    </form>
    <button onclick="data"></button>
    <script src="utils.js"></script>
    <script>
        week.onchange = function (e) {
            const instant = new Date(this.valueAsNumber).toTemporalInstant();
            const zdt = instant.toZonedDateTimeISO("UTC");
            const date = zdt.toPlainDate();

            const options = {
                weekday: "long",
                year: "numeric",
                month: "long",
                day: "numeric"
            }

            for (let n = 10; n > 7; n--) {
                data.elements[`user-${n}-monday`].value = date.toLocaleString("de", options);
                data.elements[`user-${n}-thursday`].value = date.add({ days: 1 }).toLocaleString("de", options);

            }
            //alert(this.value)
            //console.dir(dateOfEaster(date).toLocaleString())
        }

        /*         document.querySelectorAll('.username').forEach((item, idx) => {
                    item.id = `user-${10 - idx}`;
                    item.onchange = (e) => {
                        console.dir(e.target.id)
                    }
                }); */



        /*         document.querySelectorAll('[contenteditable]').forEach(item => {
                    item.oninput = function (e) {
                        console.dir(e)
                    }
                }); */

    </script>
    <script src="main.js"></script>
    <script>

        addEventListener('loads', async (event) => {


            document.querySelectorAll('.appointment').forEach(item => {
                item.placeholder = 'TT HH:MM';
                item.pattern =
                    item.onfocus = function (e) {
                        //  console.log(this)
                    }

                item.onchange = function (e) {
                    //const regex = /((?<user>user\d\d)\s(?:(?<med>med\d\d)|(?<test>test\d\d)|(?<report>report\d\d)))/;
                    //console.log(this.className.match(regex))
                }
            });
        });
    </script>
</body>

</html>